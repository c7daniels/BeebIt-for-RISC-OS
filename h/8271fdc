/*>8172fdc.h
 *
 * BeebIt - BBC Micro Model B Emulator
 *
 * (C) Copyright Michael J Foot, 1998-2000
 *
 * Email: <mjfoot.nz@gmail.com>
 */

#define DFS_SECTORS_PER_TRACK 10
#define DFS_SECTOR_SIZE 256
#define ADFS_SECTORS_PER_TRACK 16
#define ADFS_SECTOR_SIZE 256

#define ADFS_MASK 0x10
#define DFS_NONE 0 /*no disc image*/
#define DFS_SSD 1 /*single sided*/
#define DFS_DSD_TRACK 2 /*double sided, track interleave*/
#define DFS_DSD_SIDE 3 /*double sided, side interleave*/
#define ADFS_NON_INTERLEAVED 0x10 /*non interleaved*/
#define ADFS_INTERLEAVED 0x11 /*interleaved*/

typedef char I8271_REMOVED_DATA[ADFS_SECTOR_SIZE > DFS_SECTOR_SIZE ? ADFS_SECTOR_SIZE : DFS_SECTOR_SIZE];

/*Intel 8271*/
extern char i8271_data[0x1000]; /*hope we don't get any sectors > 4096 bytes*/

extern void i8271readimage(FILE *hfile, intptr_t nlocation, intptr_t nlength);
extern void i8271reset(void);
extern HOSTMAP* i8271poll(HOSTMAP* hmap);
extern struct R6502CPUMAP* i8271statusread(struct R6502CPUMAP* cmap, uintptr_t address_code);
extern struct R6502CPUMAP* i8271resultread(struct R6502CPUMAP* cmap, uintptr_t address_code);
extern struct R6502CPUMAP* i8271dataread(struct R6502CPUMAP* cmap, uintptr_t address_code);
extern struct R6502CPUMAP* i8271commandwrite(struct R6502CPUMAP* cmap, uintptr_t address_code, uint8_t value);
extern struct R6502CPUMAP* i8271parameterwrite(struct R6502CPUMAP* cmap, uintptr_t address_code, uint8_t value);
extern struct R6502CPUMAP* i8271resetwrite(struct R6502CPUMAP* cmap, uintptr_t address_code, uint8_t value);
extern struct R6502CPUMAP* i8271datawrite(struct R6502CPUMAP* cmap, uintptr_t address_code, uint8_t value);
